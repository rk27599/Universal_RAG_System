# ==============================================================================
# RAG Web Application - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and update with your actual values
#
# Database Options:
# - PostgreSQL (Recommended for production - 50x faster vector search)
# - SQLite (Development/testing only - slower performance)
# ==============================================================================

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

# Option 1: PostgreSQL with pgvector (RECOMMENDED for production)
# Provides 50x faster vector search with HNSW index
DATABASE_URL=postgresql://rag_user:your_secure_password@localhost:5432/rag_database

# Option 2: SQLite (Development/Testing ONLY)
# Uncomment below and comment PostgreSQL URL above for local development
# DATABASE_URL=sqlite:///./dev.db

# Database Connection Settings
DATABASE_ECHO=False  # Set to True for SQL query logging (debugging)

# ------------------------------------------------------------------------------
# LLM PROVIDER CONFIGURATION (Local LLM)
# ------------------------------------------------------------------------------

# Choose your LLM provider: "ollama" or "vllm"
# - Ollama: Easy setup, good for single-user, serialized requests
# - vLLM: High-performance, multi-GPU, concurrent requests (10-100x faster for multiple users)
LLM_PROVIDER=ollama

# ------------------------------------------------------------------------------
# OLLAMA CONFIGURATION (Default Provider)
# ------------------------------------------------------------------------------

OLLAMA_BASE_URL=http://localhost:11434
DEFAULT_MODEL=mistral
AVAILABLE_MODELS=["mistral", "llama2", "codellama", "phi"]

# ------------------------------------------------------------------------------
# vLLM CONFIGURATION (High-Performance Alternative)
# ------------------------------------------------------------------------------
# Uncomment and configure if using vLLM (LLM_PROVIDER=vllm)
# Requires: GPU with CUDA, vLLM installed in venv

# vLLM server endpoint (OpenAI-compatible API)
# VLLM_BASE_URL=http://localhost:8001

# Path where vLLM models are stored
# VLLM_MODEL_PATH=/models

# Number of GPUs available for vLLM
# VLLM_GPU_COUNT=1

# Tensor parallelism size (must divide GPU count evenly)
# Examples:
#   - 1 GPU: VLLM_TENSOR_PARALLEL_SIZE=1
#   - 2 GPUs: VLLM_TENSOR_PARALLEL_SIZE=1 or 2
#   - 4 GPUs: VLLM_TENSOR_PARALLEL_SIZE=1, 2, or 4
#   - 8 GPUs: VLLM_TENSOR_PARALLEL_SIZE=1, 2, 4, or 8
# VLLM_TENSOR_PARALLEL_SIZE=1

# ------------------------------------------------------------------------------
# SECURITY CONFIGURATION
# ------------------------------------------------------------------------------

# Generate a secure random key for production:
# python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-this-to-a-secure-random-key-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ------------------------------------------------------------------------------
# APPLICATION SETTINGS
# ------------------------------------------------------------------------------

APP_NAME=Secure RAG System
DEBUG=False  # Set to True ONLY for development
HOST=127.0.0.1  # Localhost only for security
PORT=8000

# ------------------------------------------------------------------------------
# FILE UPLOAD SETTINGS
# ------------------------------------------------------------------------------

UPLOAD_DIR=./data/uploads
MAX_FILE_SIZE=52428800  # 50MB in bytes
ALLOWED_FILE_TYPES=[".pdf", ".html", ".txt", ".md", ".docx", ".json", ".jsonl"]

# ------------------------------------------------------------------------------
# VECTOR & RAG SETTINGS
# ------------------------------------------------------------------------------

VECTOR_DIMENSION=384  # For sentence-transformers/all-MiniLM-L6-v2
MAX_CHUNKS_PER_DOCUMENT=1000
DEFAULT_TOP_K=5
MIN_SIMILARITY=0.3

# ------------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ------------------------------------------------------------------------------

LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=./logs/rag_app.log

# ------------------------------------------------------------------------------
# RATE LIMITING
# ------------------------------------------------------------------------------

RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # seconds

# ------------------------------------------------------------------------------
# SSL/TLS (Optional - for production HTTPS)
# ------------------------------------------------------------------------------

# SSL_KEYFILE=/path/to/keyfile.pem
# SSL_CERTFILE=/path/to/certfile.pem

# ==============================================================================
# SECURITY NOTES:
# - NEVER commit .env file to version control
# - Use strong passwords in production
# - Keep SECRET_KEY secure and unique
# - PostgreSQL provides 50x faster vector search than SQLite
# - All services must run on localhost for security compliance
# ==============================================================================
